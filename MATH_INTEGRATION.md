# MathLive 数学公式集成说明

## 功能概述

已成功将 MathLive 数学公式编辑器集成到 wangEditor-next 编辑器中，提供以下功能：

### 主要特性

1. **数学公式菜单按钮** - 在工具栏中添加了数学公式按钮（∑ 符号）
2. **数学公式编辑器** - 点击按钮打开 MathLive 编辑器模态框
3. **实时预览** - 编辑时可以实时预览数学公式效果
4. **公式渲染** - 在编辑器中以只读模式渲染数学公式
5. **双击编辑** - 双击已插入的公式可以重新编辑

### 使用方法

1. **插入新公式**：

   - 点击工具栏中的数学公式按钮（∑）
   - 在弹出的编辑器中输入 LaTeX 公式
   - 点击"确定"插入公式

2. **编辑现有公式**：
   - 双击编辑器中的数学公式
   - 在弹出的编辑器中修改公式
   - 点击"确定"保存修改

### 技术实现

#### 核心组件

1. **MathMenu.tsx** - 自定义菜单按钮
2. **MathEditor.tsx** - 数学公式编辑器模态框
3. **MathElement.tsx** - 数学公式元素定义和渲染
4. **MathEditor.css** - 样式文件

#### 集成步骤

1. 注册自定义菜单到 wangEditor
2. 注册数学公式渲染插件
3. 通过 CustomEvent 实现组件间通信
4. 使用 MathLive 的 math-field 元素进行编辑和渲染

### 依赖项

- `mathlive`: ^0.107.1 - 数学公式编辑器核心库
- `@wangeditor-next/editor`: ^5.6.43 - 富文本编辑器
- `@wangeditor-next/editor-for-react`: ^1.0.8 - React 集成

### 样式特性

- 响应式设计的编辑器模态框
- 悬停效果和交互反馈
- 与编辑器主题一致的样式设计
- 清晰的视觉层次和用户体验

### 扩展建议

1. **公式模板** - 可以添加常用数学公式模板
2. **快捷键支持** - 添加键盘快捷键快速插入公式
3. **公式库** - 实现公式保存和复用功能
4. **导出支持** - 支持导出为 MathML 或图片格式

### 注意事项

- 确保 MathLive 的 CSS 样式正确加载
- 数学公式在编辑器中以 void 元素形式存在
- 双击编辑功能通过全局事件实现
- 公式数据以 LaTeX 格式存储在编辑器内容中
